!function(t){"use strict";var e={filterOptionInList:function(n,i){var o=15,s=0,c=13;t(n).keydown(function(a){var l=t(this).find(".custom-select-list");if(a.which===c)t(l).removeClass("focused"),t(".custom-select-option").slideUp(i.animation);else if(a.which>64&&a.which<91||a.which>47&&a.which<58||a.which>95&&a.which<106){var r=[],u=String.fromCharCode(a.which),h=u.toLowerCase(),d=0;if(t(l).removeClass("focused"),t(l).each(function(e,n){(t(n).text().trim().charAt(0)===h||t(n).text().trim().charAt(0)===u)&&(r[d]=n,d++)}),0!==r.length){var p=t(this).find(".custom-select-option");o===a.which?(t(r).eq(s).addClass("focused"),e.showSelectedOption(n,i),s<r.length-1?s++:s=0):(t(r).eq(0).addClass("focused"),e.showSelectedOption(n,i),s=0,1===r.length?s=0:s++);var f=t(this).find(".focused").index(),m=t(this).find(".custom-select-list").innerHeight();p.scrollTop(f*m)}o=a.which}})},toggleOptions:function(n,i){var o=t(n).parent(".custom-select-wrapper");o.click(function(n){n.stopPropagation();var s=t(this),c=o.children(".custom-select-option"),a=s.children(".custom-select-option"),l=s.children("select").attr("disabled");"undefined"==typeof l&&(t(c).not(s.children(".custom-select-option")).slideUp(i.animation),s.attr("tabindex","1"),s.focus(),a.slideToggle(i.animation),e.filterOptionInList(s,i),t(document).click(function(){a.slideUp(i.animation)}),e.showSelectedOption(s,i))})},updateHtmlOption:function(e){var n=t(e).parent().siblings("select").children("option");t(n).each(function(){t(this).text()===t(e).text()&&(t(this).prop("selected",!0),t(n).not(t(this)).each(function(){t(this).removeProp("selected")}),t(this).parent("select").change())})},showSelectedOption:function(n,i){var o=t(n).children(".custom-select-option").children(".custom-select-list"),s=t(n).children().next(".custom-select-holder"),c=function(t){var n=t.attr("style");s.text(t.text()),i.showImageOnHolder&&s.attr("style",n),e.updateHtmlOption(t)};o.each(function(){if(t(this).hasClass("focused")){var e=t(this);c(e)}}),o.click(function(e){e.stopImmediatePropagation(),t(o).removeClass("focused");var n=t(this);c(n),n.parent().slideUp(i.animation)})},imageStyle:function(t,e){t.css({"background-image":"url("+e+")"}),t.addClass("image-on-option")},generateOption:function(n,i){var o=t("<ul></ul>").attr("class","custom-select-option"),s=t(n).children("option");t(s).each(function(n){var i=t("<li></li>").attr("class","custom-select-list"),c=t(s[n]).attr("data-url");i.append(t(s[n]).text()),c&&e.imageStyle(i,c),t(o).append(i)}),t(i).append(o)},initialSelected:function(n,i){var o=t(n).find(":selected"),s=t(o).attr("data-url"),c=t(n).next(".custom-select-holder");c.text(o.text()),s&&i.showImageOnHolder&&e.imageStyle(c,s)},makeCanvas:function(){var e=t(".custom-select-wrapper"),n=e.outerHeight(),i=e.find("ul");this.calcTop=function(){i.css({top:n-1+"px"})},this.init=function(){this.calcTop()}},wrapElement:function(n,i){t(n).each(function(){var n=t(this);n.wrap(t("<span></span>").attr("class","custom-select-wrapper")),n.after("<span class='custom-select-holder'></span>"),e.initialSelected(n,i);var o=n.parent(".custom-select-wrapper");e.generateOption(n,o)})},tabFocus:function(e){var n=function(e,n){var i=e,o=i.parent(),s=9;t(window).keyup(function(t){var e=t.keyCode?t.keyCode:t.which;e===s&&("focus"===n?o.addClass("focus-select"):"none"===n&&o.removeClass("focus-select"))})};e.on("focusout",function(){n(t(this),"none")}),e.on("focus",function(){n(t(this),"focus")})},windowResize:function(n,i){t(window).resize(function(){var t=new e.makeCanvas(n,i);t.calcTop()})},init:function(t,n){e.wrapElement(t,n),e.toggleOptions(t,n);var i=new e.makeCanvas(t,n);i.init(),e.windowResize(t,n),e.tabFocus(t)}};t.fn.CustomSelect=function(n){var i={theme:"default",showImageOnHolder:!0,animation:"fast"},o=t.extend(i,n);e.init(this,o)}}(jQuery);